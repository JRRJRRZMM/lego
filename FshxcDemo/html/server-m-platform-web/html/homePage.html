<!DOCTYPE html>
<html lang="en" style="height:100%">

<head>
    <meta charset="UTF-8">
  	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>主页</title>
    <link href="../plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  	<link rel="stylesheet" href="../css/homePage.css">
    </script><script src="../js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="../js/echarts.js"></script>
    <script src="../plugins/bootstrap/js/bootstrap.min.js"></script>
  	<script src="../js/bin.js"></script>
    <script type="text/javascript" src="../js/homePage.js"></script>
</head>
<body  style="height:100%;background: #eaedf2;">
  <div class="" style="height:100%;padding:15px 15px 15px 30px;background: #eaedf2;overflow: hidden;">
    <div class="" id="homePagetop">
      <div class="homeCardName">
        <div class="disposeWorld">
          <b>待办事项</b>
        </div>
        <div class="">
          <div class="disposeOrder" style="margin-left:0px;border-top: 5px solid #f5ec00;">
            <img src="../images/awaitworkorderimg.png" alt="">
            <p>待处理工单</p>
            <div class="" id='homebadgeIcon'>
              0
            </div>
          </div>
          <div class="disposeOrder" style="border-top: 5px solid #1ea2de;">
            <img src="../images/messageimg.png" alt="">
            <p>未读消息</p>
            <div class="">
              0
            </div>
          </div>
          <div class="disposeOrder" style="border-top: 5px solid #00cc8d;">
            <img src="../images/backlogimg.png" alt="">
            <p>待办事项</p>
            <div class="" id="schedule">
              0
            </div>
          </div>
        </div>
      </div>
      <div class="homeCardName">
        <div class="disposeWorld">
          <b>地图</b>
        </div>
        <div class="">
          <div class="disposeOrder" style="margin-left:0px;border-top: 5px solid #006be3;">
            <img src="../images/initializeimg.png" alt="">
            <p>初始化</p>
            <div class="" id="mapAllCount">
              0
            </div>
          </div>
          <div class="disposeOrder" style="border-top: 5px solid #f5ec00;">
            <img src="../images/theatersimg.png" alt="">
            <p>待上线</p>
            <div class="" id="mapReadyCount">
              0
            </div>
          </div>
          <div class="disposeOrder" style="border-top: 5px solid #e8007e;">
            <img src="../images/putIntoimg.png" alt="">
            <p>已投入</p>
            <div class="" id="mapOnLineCount">
              0
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="" id="homePagebottom">

          <div class="" id="EchartsDate" style="width:100%;height:350px;">

          </div>
      </div>
    </div>
  </div>
</body>
<script type="text/javascript">
    var basePath = url();
    var myUrl1 = basePath+"/dataStatistic/findSysTokenLogSummery?jsessionid=" + sessionStorage.getItem('jsessionid');
$.ajax({
  type: "post",
  dataType: "json",
  contentType: "application/json",
  url: myUrl1,
  success: function (args) {
    if (args.code == '10000') {
      var EchartsDateArr = []
      var mathdata;
      for (var i = 0; i < args.data.length; i++) {
        if(args.data[i].reqType=="地图定位" || args.data[i].reqType=="地图导航" || args.data[i].reqType=="地图搜索" ||args.data[i].reqType=="地图数据"){
          var colorts = 'colors'+i;
        if(i == 0){
          colorts = '#236de9';
        }else if (i == 1) {
          colorts = '#43cd27';
        }else if (i == 2) {
          colorts = '#2382b9';
        }else if (i == 3) {
          colorts = '#e6b962';
        }else if (i == 4) {
          colorts = '#842513';
        }else if (i == 5) {
          colorts = '#7b0637';
        }else if (i == 6) {
          colorts = '#d6d14f';
        }else if (i == 7) {
          colorts = '#1a9d8c';
        }else if (i == 8) {
          colorts = '#e8b865';
        }else if (i == 9) {
          colorts = '#968e08';
        }else{

        }
        var EchartsDate = {
              data: [],
              name: '',
              color:'',
              smooth: true,
              type: 'line',
          };
        if(args.data[i].reqResult == '00001'){
          EchartsDate.name = args.data[i].reqType+'(Y)';
        }else{
          EchartsDate.name = args.data[i].reqType+'(N)';
        }
        EchartsDate.data = args.data[i].logHourCount;
        EchartsDate.color = colorts;
        EchartsDateArr.push(EchartsDate)
        }
      }
      // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('EchartsDate'));

        // 指定图表的配置项和数据
        var option = {
            title: {
                text: '请求次数'
            },
            tooltip: {},
            legend: {
                // data:['流量','数据']
            },
            xAxis: {
                data: ["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]
            },
            yAxis: {},
            series:EchartsDateArr
          };
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    }
  }
});
//首页数据展示
    $.ajax({
        url: basePath + "/workOrder/getWorkOrderCount?jsessionid=" + sessionStorage.getItem('jsessionid'),
        type: "post",
        dataType: "json",
        contentType: "application/json",
        success: function (data) {
            if (data.code == '10000') {
                if (data.data == 0) {
                    $("#badgeIcon").hide();
                    $("#homebadgeIcon").html(data.data);
                    $("#schedule").html(data.data);
                } else {
                    $("#homebadgeIcon").html(data.data);
                    $("#schedule").html(data.data);
                    $("#badgeIcon").html(data.data);
                    $("#badgeIcon").show();
                }
            }
        }
    });
</script>
</html>
